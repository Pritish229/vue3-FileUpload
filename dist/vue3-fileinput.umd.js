(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.Vue3Fileinput={},i.Vue))})(this,function(i,e){"use strict";const x=(t,u)=>{const c=t.__vccOpts||t;for(const[o,s]of u)c[o]=s;return c},B={class:"upload-text"},T={key:1,class:"preview"},w=["src","alt"],E=["accept"],S={key:0,class:"error-message"},_={key:1,class:"helper-text"},z={__name:"FileUpload",props:{modelValue:File,required:Boolean,fileType:{type:Array,default:()=>["image/png","image/jpeg","image/jpg","application/pdf","text/plain"]},placeholder:{type:String,default:"Drag and drop a file here"},helperText:{type:String,default:""},maxSize:{type:Number,default:2*1024*1024},maxFiles:{type:Number,default:1},inValid:Boolean},emits:["update:modelValue","file-reset"],setup(t,{expose:u,emit:c}){const o=t,s=c,n=e.ref(null),V=e.ref(null),r=e.ref(""),d=e.ref(!0),f=e.ref(o.modelValue||null),p=e.ref(!1),D=o.fileType.join(","),m=e.ref("");e.watch(()=>o.modelValue,l=>{l?k(l):g()});const M=()=>{V.value.click()},b=l=>{l.dataTransfer.dropEffect="copy",p.value=!0},N=()=>{p.value=!1},j=l=>{p.value=!1;const a=l.dataTransfer.files[0];F(a)},C=l=>{const a=l.target.files[0];F(a)},F=l=>{if(!l)return;if(!o.fileType.includes(l.type)){v(`Invalid file type. Only ${o.fileType.join(", ")} allowed.`);return}const a=(o.maxSize/(1024*1024)).toFixed(2);if(l.size>o.maxSize){v(`File is too large. Maximum size is ${a}MB.`);return}r.value="",d.value=!0,f.value=l,s("update:modelValue",l),k(l)},k=l=>{const a=new FileReader;l.type.startsWith("image/")?(a.onload=I=>{n.value=I.target.result,m.value="Preview"},a.readAsDataURL(l)):(n.value="",m.value="File Preview")},v=l=>{g(),r.value=l,d.value=!1},g=()=>{n.value=null,f.value=null,r.value="",d.value=!0,s("update:modelValue",null),s("file-reset")};return u({resetFile:g,selectedFile:f,isFileValid:d,preview:n}),(l,a)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{class:e.normalizeClass(["drop-zone",{"error-border error-file":r.value||t.inValid,dragging:p.value}]),onClick:M,onDragover:e.withModifiers(b,["prevent"]),onDragleave:e.withModifiers(N,["prevent"]),onDrop:e.withModifiers(j,["prevent"])},[n.value?(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("img",{src:n.value,alt:m.value,class:"preview-image"},null,8,w)])):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass({"placeholder-error":t.inValid,placeholder:!t.inValid})},[e.renderSlot(l.$slots,"icon",{},()=>[a[0]||(a[0]=e.createElementVNode("i",{class:"fas fa-upload upload-icon fs-4"},null,-1))],!0),e.createElementVNode("p",B,e.toDisplayString(t.placeholder),1)],2)),e.createElementVNode("input",{type:"file",ref_key:"fileInput",ref:V,onChange:C,hidden:"",accept:e.unref(D)},null,40,E)],34),r.value?(e.openBlock(),e.createElementBlock("p",S,e.toDisplayString(r.value),1)):t.helperText?(e.openBlock(),e.createElementBlock("p",_,e.toDisplayString(t.helperText),1)):e.createCommentVNode("",!0)]))}},y=x(z,[["__scopeId","data-v-d2bd141b"]]),h={install(t){t.component("Vue3Fileinput",y)}};i.FileUpload=y,i.Vue3Fileinput=h,i.default=h,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
