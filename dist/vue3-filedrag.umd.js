(function(o,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(o=typeof globalThis<"u"?globalThis:o||self,e(o.Vue3FileDrag={},o.Vue))})(this,function(o,e){"use strict";const x=(t,f)=>{const c=t.__vccOpts||t;for(const[r,s]of f)c[r]=s;return c},v={class:"upload-text"},B={key:1,class:"preview"},D=["src","alt"],T=["accept"],w={key:0,class:"error-message"},E={key:1,class:"helper-text"},S={__name:"FileDrag",props:{modelValue:File,required:Boolean,fileType:{type:Array,default:()=>["image/png","image/jpeg","image/jpg","application/pdf","text/plain"]},placeholder:{type:String,default:"Drag and drop a file here"},helperText:{type:String,default:""},maxSize:{type:Number,default:2*1024*1024},maxFiles:{type:Number,default:1},inValid:Boolean},emits:["update:modelValue","file-reset"],setup(t,{expose:f,emit:c}){const r=t,s=c,i=e.ref(null),h=e.ref(null),n=e.ref(""),d=e.ref(!0),u=e.ref(r.modelValue||null),p=e.ref(!1),z=r.fileType.join(","),m=e.ref("");e.watch(()=>r.modelValue,l=>{l?k(l):g()});const M=()=>{h.value.click()},N=l=>{l.dataTransfer.dropEffect="copy",p.value=!0},b=()=>{p.value=!1},j=l=>{p.value=!1;const a=l.dataTransfer.files[0];V(a)},C=l=>{const a=l.target.files[0];V(a)},V=l=>{if(!l)return;if(!r.fileType.includes(l.type)){F(`Invalid file type. Only ${r.fileType.join(", ")} allowed.`);return}const a=(r.maxSize/(1024*1024)).toFixed(2);if(l.size>r.maxSize){F(`File is too large. Maximum size is ${a}MB.`);return}n.value="",d.value=!0,u.value=l,s("update:modelValue",l),k(l)},k=l=>{const a=new FileReader;l.type.startsWith("image/")?(a.onload=I=>{i.value=I.target.result,m.value="Preview"},a.readAsDataURL(l)):(i.value="",m.value="File Preview")},F=l=>{g(),n.value=l,d.value=!1},g=()=>{i.value=null,u.value=null,n.value="",d.value=!0,s("update:modelValue",null),s("file-reset")};return f({resetFile:g,selectedFile:u,isFileValid:d,preview:i}),(l,a)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{class:e.normalizeClass(["drop-zone",{"error-border error-file":n.value||t.inValid,dragging:p.value}]),onClick:M,onDragover:e.withModifiers(N,["prevent"]),onDragleave:e.withModifiers(b,["prevent"]),onDrop:e.withModifiers(j,["prevent"])},[i.value?(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("img",{src:i.value,alt:m.value,class:"preview-image"},null,8,D)])):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass({"placeholder-error":t.inValid,placeholder:!t.inValid})},[e.renderSlot(l.$slots,"icon",{},()=>[a[0]||(a[0]=e.createElementVNode("i",{class:"fas fa-upload upload-icon fs-4"},null,-1))],!0),e.createElementVNode("p",v,e.toDisplayString(t.placeholder),1)],2)),e.createElementVNode("input",{type:"file",ref_key:"fileInput",ref:h,onChange:C,hidden:"",accept:e.unref(z)},null,40,T)],34),n.value?(e.openBlock(),e.createElementBlock("p",w,e.toDisplayString(n.value),1)):t.helperText?(e.openBlock(),e.createElementBlock("p",E,e.toDisplayString(t.helperText),1)):e.createCommentVNode("",!0)]))}},y=x(S,[["__scopeId","data-v-7a39e182"]]),_={install(t){t.component("FileDrag",y)}};o.FileDrag=y,o.default=_,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
