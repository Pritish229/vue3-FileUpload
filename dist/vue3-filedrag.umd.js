(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.Vue3FileDrag={},i.Vue))})(this,function(i,e){"use strict";const v=(t,f)=>{const c=t.__vccOpts||t;for(const[o,s]of f)c[o]=s;return c},F={class:"upload-text"},B={key:1,class:"preview"},T=["src","alt"],w=["accept"],E={key:0,class:"error-message"},S={key:1,class:"helper-text"},D={__name:"FileUpload",props:{modelValue:File,required:Boolean,fileType:{type:Array,default:()=>["image/png","image/jpeg","image/jpg","application/pdf","text/plain"]},placeholder:{type:String,default:"Drag and drop a file here"},helperText:{type:String,default:""},maxSize:{type:Number,default:2*1024*1024},maxFiles:{type:Number,default:1},inValid:Boolean},emits:["update:modelValue","file-reset"],setup(t,{expose:f,emit:c}){const o=t,s=c,r=e.ref(null),h=e.ref(null),n=e.ref(""),d=e.ref(!0),u=e.ref(o.modelValue||null),p=e.ref(!1),z=o.fileType.join(","),m=e.ref("");e.watch(()=>o.modelValue,l=>{l?k(l):g()});const b=()=>{h.value.click()},M=l=>{l.dataTransfer.dropEffect="copy",p.value=!0},N=()=>{p.value=!1},j=l=>{p.value=!1;const a=l.dataTransfer.files[0];V(a)},C=l=>{const a=l.target.files[0];V(a)},V=l=>{if(!l)return;if(!o.fileType.includes(l.type)){x(`Invalid file type. Only ${o.fileType.join(", ")} allowed.`);return}const a=(o.maxSize/(1024*1024)).toFixed(2);if(l.size>o.maxSize){x(`File is too large. Maximum size is ${a}MB.`);return}n.value="",d.value=!0,u.value=l,s("update:modelValue",l),k(l)},k=l=>{const a=new FileReader;l.type.startsWith("image/")?(a.onload=I=>{r.value=I.target.result,m.value="Preview"},a.readAsDataURL(l)):(r.value="",m.value="File Preview")},x=l=>{g(),n.value=l,d.value=!1},g=()=>{r.value=null,u.value=null,n.value="",d.value=!0,s("update:modelValue",null),s("file-reset")};return f({resetFile:g,selectedFile:u,isFileValid:d,preview:r}),(l,a)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{class:e.normalizeClass(["drop-zone",{"error-border error-file":n.value||t.inValid,dragging:p.value}]),onClick:b,onDragover:e.withModifiers(M,["prevent"]),onDragleave:e.withModifiers(N,["prevent"]),onDrop:e.withModifiers(j,["prevent"])},[r.value?(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("img",{src:r.value,alt:m.value,class:"preview-image"},null,8,T)])):(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass({"placeholder-error":t.inValid,placeholder:!t.inValid})},[e.renderSlot(l.$slots,"icon",{},()=>[a[0]||(a[0]=e.createElementVNode("i",{class:"fas fa-upload upload-icon fs-4"},null,-1))],!0),e.createElementVNode("p",F,e.toDisplayString(t.placeholder),1)],2)),e.createElementVNode("input",{type:"file",ref_key:"fileInput",ref:h,onChange:C,hidden:"",accept:e.unref(z)},null,40,w)],34),n.value?(e.openBlock(),e.createElementBlock("p",E,e.toDisplayString(n.value),1)):t.helperText?(e.openBlock(),e.createElementBlock("p",S,e.toDisplayString(t.helperText),1)):e.createCommentVNode("",!0)]))}},y=v(D,[["__scopeId","data-v-d2bd141b"]]),_={install(t){t.component("fileupload",y)}};i.Vue3fileupload=_,i.fileupload=y,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
